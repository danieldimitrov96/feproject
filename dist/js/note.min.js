"use strict";var readMoreLess=function(t){var e=t.find("#note-content"),n=e.text();if(n.length>250){var a=$("<span/>").attr("id","first-part").text(n.substr(0,250)),o=$("<span/>").attr("id","second-part").text(n.substr(250,n.length)),i=$("<span/>").css("opacity","0.5").html("...");o.css("display","none"),e.append(a,i,o),e.click(function(){"none"===o.css("display")?(i.css("display","none"),o.show(200).css("display","")):(o.hide(150),i.css("display",""))})}},applyButtonsEvents=function(t,e){var n=t.find("#note-title-area"),a=t.find("#note-category-area"),o=t.find("#bottom");t.find("#wipe_button").click(function(){1==confirm("Are you sure you wan to delete this note?")&&(t.fadeOut(500),localStorage.removeItem(e),setTimeout(function(){note.wipe(t,e)},1e3))}),t.find("#edit_button").click(function(){note.addCurrentInputInEditModal(t,e)}),o.find("#expand_button").click(function(){t.attr("class").includes("col-sm-4")?(t.attr("class","col-sm-8"),n.attr("class","col-xs-10"),a.attr("class","col-xs-2")):(t.attr("class","col-sm-4"),n.attr("class","col-xs-8"),a.attr("class","col-xs-4"))})},applyHoverEffects=function(t){var e=t.find("#bottom").find(".note-options");e.css("display","none"),t.on({mouseenter:function(){e.fadeIn(300)},mouseleave:function(){e.fadeOut(300)}})},note=function(){var t=$(".grid-row"),e=void 0,n=$("<div/>").attr({class:"col-sm-4 note-container"}).append($("<div/>").attr({id:"note",class:"note"})),a=$("<div/>").attr({class:"row"}).append($("<div/>").attr({class:"col-xs-8",id:"note-title-area"})).append($("<div/>").attr({class:"col-xs-4",id:"note-category-area"}));a.find("#note-title-area").append($("<p/>").attr({class:"h4 page-header note-title",id:"note-title"}));var o=$("<div/>").attr({class:"row note-content"}).append($("<div/>").attr({class:"col-sm-12"}));o.find(".col-sm-12").append($("<p/>").attr({id:"note-content"}));var i=$("<div/>").attr({class:"note-bottom",id:"bottom"}),s=$("<div/>").attr({class:"col-xs-5"}).append($("</p>").attr({class:"note-date-and-time",id:"note-date-and-time"})),d=$("<div/>").attr({class:"col-xs-7 text-right note-options"}),r=$("<span/>").attr({id:"expand_button",class:"hint--bottom","aria-label":"expand"}).append($("<i/>").attr({class:"material-icons"}).html("settings_ethernet")),l=$("<span/>").attr({id:"edit_button",class:"hint--bottom","aria-label":"edit","data-toggle":"modal","data-target":"#editNoteModal"}).append($("<i/>").attr({class:"material-icons hint--info"}).html("mode_edit")),c=$("<span/>").attr({id:"wipe_button",class:"hint--bottom","aria-label":"delete"}).append($("<i/>").attr({class:"material-icons hint--info"}).html("delete_forever"));d.append(r,l,c),i.append(s,d),a.appendTo(n.find("#note")),o.appendTo(n.find("#note")),i.appendTo(n.find(".note-content"));var p=function(t){var e=t.split(",").map(function(t){return t.match(/\d+/g).join("")}),a="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.7)";return n.find("#note").css("background-color",a),a};return{add:function(){var s,d,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb(250,250,249)",f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;null===f&&(f=parseInt(1e6*Math.random())),s=r,a.find("#note-title").html($.parseHTML(s)),d=l,o.find("#note-content").html($.parseHTML(d)),function(n){switch(n){case"TODO":e=t.find("#todo");break;case"WORK":e=t.find("#work");break;case"NEW IDEAS":e=t.find("#new-ideas");break;default:e=t.find("#todo")}a.find("#note-category-area").html($("</p>").attr("class","note-category-title h6 page-header text-sm-left").text(n))}(c),p(u),function(){var t=[];t.push("Jan"),t.push("Feb"),t.push("Mar"),t.push("Apr"),t.push("May"),t.push("Jun"),t.push("Jul"),t.push("Aug"),t.push("Sep"),t.push("Oct"),t.push("Nov"),t.push("Dec");var e=new Date;i.find("#note-date-and-time").text(e.getHours()+":"+e.getMinutes()+" "+e.getDate()+"-"+t[e.getMonth()]+"-"+e.getFullYear())}();var h=n.clone();h.prependTo(e),applyButtonsEvents(h,f),applyHoverEffects(h),readMoreLess(h);var v=JSON.stringify({title:r,content:l,category:c,color:u});localStorage.setItem(f,v)},wipe:function(t,e){t.remove()},addCurrentInputInEditModal:function(t,e){var n=t.find("#note-title").text(),a=t.find("#note-content").html(),o=t.find("#note-category-area").text(),i=t.find("#note").css("background-color");$("#editNoteTitle").val(n),$("#categoryEdit").val(o).change(),CKEDITOR.instances.editor2.setData(a);var s=$("#editNoteModal");s.find(".btn-group > label").each(function(){var t=$(this).css("background-color");p(t)!==i?$(this).hasClass("active")&&$(this).removeClass("active"):$(this).hasClass("active")||$(this).addClass("active")}),$("#modalSubmitEditButton").one("click",function(i){n=s.find("#editNoteTitle").val(),a=CKEDITOR.instances.editor2.getData();var d=s.find(".btn-group > .active").css("background-color"),r=p(d);t.find("#note-title").text(n),t.find("#note-content").html(a),t.find("#note-category-area").html('<p class="note-category-title h6 page-header">'+o+"</p>"),t.find(".note").css("background-color",r);var l=JSON.stringify({title:n,content:a,category:o,color:d});localStorage.setItem(e,l)})}}}();